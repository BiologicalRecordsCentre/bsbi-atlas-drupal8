"use strict";window.jscolor||(window.jscolor=function(){var e,t,b={initialized:!1,instances:[],triggerQueue:[],register:function(){document.addEventListener("DOMContentLoaded",b.init,!1),document.addEventListener("mousedown",b.onDocumentMouseDown,!1),document.addEventListener("keyup",b.onDocumentKeyUp,!1),window.addEventListener("resize",b.onWindowResize,!1)},init:function(){if(!b.initialized)for(b.pub.install(),b.initialized=!0;b.triggerQueue.length;){var e=b.triggerQueue.shift();b.triggerGlobal(e)}},installBySelector:function(e){for(var t,r,n=document.querySelectorAll(e),i=new RegExp("(^|\\s)("+b.pub.lookupClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),o=0;o<n.length;o+=1){if(!(n[o].jscolor&&n[o].jscolor instanceof b.pub))if(void 0===n[o].type||"color"!=n[o].type.toLowerCase()||!b.isColorAttrSupported)if(null!==(t=b.getDataAttr(n[o],"jscolor"))||n[o].className&&(r=n[o].className.match(i))){var s=n[o],a="";null!==t?a=t:r&&(console.warn('Installation using class name is DEPRECATED. Use data-jscolor="" attribute instead.'),r[4]&&(a=r[4]));var l=null;if(a.trim())try{l=b.parseOptionsStr(a)}catch(e){console.warn(e+"\n"+a)}try{new b.pub(s,l)}catch(e){console.warn(e)}}}},parseOptionsStr:function(t){var r=null;try{r=JSON.parse(t)}catch(e){if(!b.pub.looseJSON)throw new Error("Could not parse jscolor options as JSON: "+e);try{r=new Function("var opts = ("+t+'); return typeof opts === "object" ? opts : {};')()}catch(e){throw new Error("Could not evaluate jscolor options: "+e)}}return r},getInstances:function(){for(var e=[],t=0;t<b.instances.length;t+=1)b.instances[t]&&b.instances[t].targetElement&&e.push(b.instances[t]);return e},fetchElement:function(e){if(!e)return null;if("string"!=typeof e)return"object"==typeof e&&e instanceof HTMLElement?e:(console.warn("Invalid element of type %s: %s",typeof e,e),null);var t=e,r=null;try{r=document.querySelector(t)}catch(e){return console.warn(e),null}return r||console.warn("No element matches the selector: %s",t),r},nodeName:function(e){return!(!e||!e.nodeName)&&e.nodeName.toLowerCase()},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},isTextInput:function(e){return e&&"input"===b.nodeName(e)&&"text"===e.type.toLowerCase()},isButton:function(e){if(!e)return!1;var t=b.nodeName(e);return"button"===t||"input"===t&&-1<["button","submit","reset"].indexOf(e.type.toLowerCase())},isButtonEmpty:function(e){switch(b.nodeName(e)){case"input":return!e.value||""===e.value.trim();case"button":return""===e.textContent.trim()}return null},isPassiveEventSupported:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}(),isColorAttrSupported:!(!(t=document.createElement("input")).setAttribute||(t.setAttribute("type","color"),"color"!=t.type.toLowerCase())),dataProp:"_data_jscolor",setData:function(){var e=arguments[0];if(3===arguments.length){var t=e.hasOwnProperty(b.dataProp)?e[b.dataProp]:e[b.dataProp]={},r=arguments[2];return t[i=arguments[1]]=r,!0}if(2!==arguments.length||"object"!=typeof arguments[1])throw new Error("Invalid arguments");var t=e.hasOwnProperty(b.dataProp)?e[b.dataProp]:e[b.dataProp]={},n=arguments[1];for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return!0},removeData:function(){var e=arguments[0];if(!e.hasOwnProperty(b.dataProp))return!0;for(var t=1;t<arguments.length;t+=1){var r=arguments[t];delete e[b.dataProp][r]}return!0},getData:function(e,t,r){if(!e.hasOwnProperty(b.dataProp)){if(void 0===r)return;e[b.dataProp]={}}var n=e[b.dataProp];return n.hasOwnProperty(t)||void 0===r||(n[t]=r),n[t]},getDataAttr:function(e,t){var r="data-"+t;return e.getAttribute(r)},_attachedGroupEvents:{},attachGroupEvent:function(e,t,r,n){b._attachedGroupEvents.hasOwnProperty(e)||(b._attachedGroupEvents[e]=[]),b._attachedGroupEvents[e].push([t,r,n]),t.addEventListener(r,n,!1)},detachGroupEvents:function(e){if(b._attachedGroupEvents.hasOwnProperty(e)){for(var t=0;t<b._attachedGroupEvents[e].length;t+=1){var r=b._attachedGroupEvents[e][t];r[0].removeEventListener(r[1],r[2],!1)}delete b._attachedGroupEvents[e]}},preventDefault:function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},captureTarget:function(e){e.setCapture&&(b._capturedTarget=e,b._capturedTarget.setCapture())},releaseTarget:function(){b._capturedTarget&&(b._capturedTarget.releaseCapture(),b._capturedTarget=null)},triggerEvent:function(e,t,r,n){if(e){var i=null;return("function"==typeof Event?i=new Event(t,{bubbles:r,cancelable:n}):(i=document.createEvent("Event")).initEvent(t,r,n),i)?(b.setData(i,"internal",!0),e.dispatchEvent(i),!0):!1}},triggerInputEvent:function(e,t,r,n){e&&b.isTextInput(e)&&b.triggerEvent(e,t,r,n)},eventKey:function(e){var t={9:"Tab",13:"Enter",27:"Escape"};return"string"==typeof e.code?e.code:void 0!==e.keyCode&&t.hasOwnProperty(e.keyCode)?t[e.keyCode]:null},strList:function(e){return e?e.replace(/^\s+|\s+$/g,"").split(/\s+/):[]},hasClass:function(e,t){return!!t&&(void 0!==e.classList?e.classList.contains(t):-1!=(" "+e.className.replace(/\s+/g," ")+" ").indexOf(" "+t+" "))},addClass:function(e,t){var r=b.strList(t);if(void 0===e.classList)for(n=0;n<r.length;n+=1)b.hasClass(e,r[n])||(e.className+=(e.className?" ":"")+r[n]);else for(var n=0;n<r.length;n+=1)e.classList.add(r[n])},removeClass:function(e,t){var r=b.strList(t);if(void 0===e.classList)for(i=0;i<r.length;i+=1){var n=new RegExp("^\\s*"+r[i]+"\\s*|\\s*"+r[i]+"\\s*$|\\s+"+r[i]+"(\\s+)","g");e.className=e.className.replace(n,"$1")}else for(var i=0;i<r.length;i+=1)e.classList.remove(r[i])},getCompStyle:function(e){var t=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;return t||{}},setStyle:function(e,t,r,n){var i,o=r?"important":"",s=null;for(var a in t){t.hasOwnProperty(a)&&((i=null)===t[a]?(s=s||b.getData(e,"origStyle"))&&s.hasOwnProperty(a)&&(i=s[a]):(n&&((s=s||b.getData(e,"origStyle",{})).hasOwnProperty(a)||(s[a]=e.style[a])),i=t[a]),null!==i&&e.style.setProperty(a,i,o))}},linearGradient:(e=function(){for(var e="linear-gradient",t=["","-webkit-","-moz-","-o-","-ms-"],r=document.createElement("div"),n=0;n<t.length;n+=1){var i=t[n]+e,o=i+"(to right, rgba(0,0,0,0), rgba(0,0,0,0))";if(r.style.background=o,r.style.background)return i}return e}(),function(){return e+"("+Array.prototype.join.call(arguments,", ")+")"}),setBorderRadius:function(e,t){b.setStyle(e,{"border-radius":t||"0"})},setBoxShadow:function(e,t){b.setStyle(e,{"box-shadow":t||"none"})},getElementPos:function(e,t){var r,n=0,i=0,o=e.getBoundingClientRect(),n=o.left,i=o.top;return t||(n+=(r=b.getViewPos())[0],i+=r[1]),[n,i]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getAbsPointerPos:function(e){var t=0,r=0;return void 0!==e.changedTouches&&e.changedTouches.length?(t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):"number"==typeof e.clientX&&(t=e.clientX,r=e.clientY),{x:t,y:r}},getRelPointerPos:function(e){var t=(e.target||e.srcElement).getBoundingClientRect(),r=0,n=0;return void 0!==e.changedTouches&&e.changedTouches.length?(r=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):"number"==typeof e.clientX&&(r=e.clientX,n=e.clientY),{x:r-t.left,y:n-t.top}},getViewPos:function(){var e=document.documentElement;return[(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),(window.pageYOffset||e.scrollTop)-(e.clientTop||0)]},getViewSize:function(){var e=document.documentElement;return[window.innerWidth||e.clientWidth,window.innerHeight||e.clientHeight]},RGB_HSV:function(e,t,r){e/=255,t/=255,r/=255;var n=Math.min(Math.min(e,t),r),i=Math.max(Math.max(e,t),r),o=i-n;if(0==o)return[null,0,100*i];var s=e===n?3+(r-t)/o:t===n?5+(e-r)/o:1+(t-e)/o;return[60*(6==s?0:s),o/i*100,100*i]},HSV_RGB:function(e,t,r){var n=r/100*255;if(null===e)return[n,n,n];e/=60,t/=100;var i=Math.floor(e),o=n*(1-t),s=n*(1-t*(i%2?e-i:1-(e-i)));switch(i){case 6:case 0:return[n,s,o];case 1:return[s,n,o];case 2:return[o,n,s];case 3:return[o,s,n];case 4:return[s,o,n];case 5:return[n,o,s]}},parseColorString:function(e){var t,r={rgba:null,format:null};if(t=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))return r.format="hex",6===t[1].length?r.rgba=[parseInt(t[1].substr(0,2),16),parseInt(t[1].substr(2,2),16),parseInt(t[1].substr(4,2),16),null]:r.rgba=[parseInt(t[1].charAt(0)+t[1].charAt(0),16),parseInt(t[1].charAt(1)+t[1].charAt(1),16),parseInt(t[1].charAt(2)+t[1].charAt(2),16),null],r;if(t=e.match(/^\W*rgba?\(([^)]*)\)\W*$/i)){var n,i,o,s,a=t[1].split(","),l=/^\s*(\d+|\d*\.\d+)\s*$/;if(3<=a.length&&(n=a[0].match(l))&&(i=a[1].match(l))&&(o=a[2].match(l)))return r.format="rgb",r.rgba=[parseFloat(n[1])||0,parseFloat(i[1])||0,parseFloat(o[1])||0,null],4<=a.length&&(s=a[3].match(l))&&(r.format="rgba",r.rgba[3]=parseFloat(s[1])||0),r}return!1},scaleCanvasForHighDPR:function(e){var t=window.devicePixelRatio||1;e.width*=t,e.height*=t,e.getContext("2d").scale(t,t)},genColorPreviewCanvas:function(e,t,r,n){var i=Math.round(b.pub.previewSeparator.length),o=b.pub.chessboardSize,s=b.pub.chessboardColor1,a=b.pub.chessboardColor2,l=r||2*o,d=2*o,h=document.createElement("canvas"),c=h.getContext("2d");h.width=l,h.height=d,n&&b.scaleCanvasForHighDPR(h),c.fillStyle=s,c.fillRect(0,0,l,d),c.fillStyle=a;for(var p=0;p<l;p+=2*o)c.fillRect(p,0,o,o),c.fillRect(p+o,o,o,o);e&&(c.fillStyle=e,c.fillRect(0,0,l,d));var u=null;switch(t){case"left":u=0,c.clearRect(0,0,i/2,d);break;case"right":u=l-i,c.clearRect(l-i/2,0,i/2,d)}if(null!==u){c.lineWidth=1;for(var g=0;g<b.pub.previewSeparator.length;g+=1)c.beginPath(),c.strokeStyle=b.pub.previewSeparator[g],c.moveTo(.5+u+g,0),c.lineTo(.5+u+g,d),c.stroke()}return{canvas:h,width:l,height:d}},genColorPreviewGradient:function(e,t,r){var n=[],n=t&&r?["to "+{left:"right",right:"left"}[t],e+" 0%",e+" "+r+"px","rgba(0,0,0,0) "+(r+1)+"px","rgba(0,0,0,0) 100%"]:["to right",e+" 0%",e+" 100%"];return b.linearGradient.apply(this,n)},redrawPosition:function(){if(b.picker&&b.picker.owner){var e,t,r,n,i=b.picker.owner,o=i.fixed?(e=b.getElementPos(i.targetElement,!0),[0,0]):(e=b.getElementPos(i.targetElement),b.getViewPos()),s=b.getElementSize(i.targetElement),a=b.getViewSize(),l=b.getPickerOuterDims(i);switch(i.position.toLowerCase()){case"left":r=0,n=-(t=1);break;case"right":r=0,n=t=1;break;case"top":t=0,n=-(r=1);break;default:t=0,n=r=1}var d,h=(s[r]+l[r])/2,c=(d=i.smartPosition?[-o[t]+e[t]+l[t]>a[t]&&-o[t]+e[t]+s[t]/2>a[t]/2&&0<=e[t]+s[t]-l[t]?e[t]+s[t]-l[t]:e[t],-o[r]+e[r]+s[r]+l[r]-h+h*n>a[r]?-o[r]+e[r]+s[r]/2>a[r]/2&&0<=e[r]+s[r]-h-h*n?e[r]+s[r]-h-h*n:e[r]+s[r]-h+h*n:0<=e[r]+s[r]-h+h*n?e[r]+s[r]-h+h*n:e[r]+s[r]-h-h*n]:[e[t],e[r]+s[r]-h+h*n])[t],p=d[r],u=i.fixed?"fixed":"absolute",g=(d[0]+l[0]>e[0]||d[0]<e[0]+s[0])&&d[1]+l[1]<e[1]+s[1];b._drawPosition(i,c,p,u,g)}},_drawPosition:function(e,t,r,n,i){var o=i?0:e.shadowBlur;b.picker.wrap.style.position=n,b.picker.wrap.style.left=t+"px",b.picker.wrap.style.top=r+"px",b.setBoxShadow(b.picker.boxS,e.shadow?new b.BoxShadow(0,o,e.shadowBlur,0,e.shadowColor):null)},getPickerDims:function(e){var t=[2*e.controlBorderWidth+2*e.padding+e.width,2*e.controlBorderWidth+2*e.padding+e.height],r=2*e.controlBorderWidth+2*b.getControlPadding(e)+e.sliderSize;return b.getSliderChannel(e)&&(t[0]+=r),e.isAlphaEnabled()&&(t[0]+=r),e.closeButton&&(t[1]+=2*e.controlBorderWidth+e.padding+e.buttonHeight),t},getPickerOuterDims:function(e){var t=b.getPickerDims(e);return[t[0]+2*e.borderWidth,t[1]+2*e.borderWidth]},getControlPadding:function(e){return Math.max(e.padding/2,2*e.pointerBorderWidth+e.pointerThickness-e.controlBorderWidth)},getPadYChannel:function(e){switch(e.mode.charAt(1).toLowerCase()){case"v":return"v"}return"s"},getSliderChannel:function(e){if(2<e.mode.length)switch(e.mode.charAt(2).toLowerCase()){case"s":return"s";case"v":return"v"}return null},onDocumentMouseDown:function(e){var t=e.target||e.srcElement;t.jscolor&&t.jscolor instanceof b.pub?t.jscolor.showOnClick&&!t.disabled&&t.jscolor.show():t._jscControlName?b.onControlPointerStart(e,t,t._jscControlName,"mouse"):b.picker&&b.picker.owner&&b.picker.owner.hide()},onDocumentKeyUp:function(e){-1!==["Tab","Escape"].indexOf(b.eventKey(e))&&b.picker&&b.picker.owner&&b.picker.owner.hide()},onWindowResize:function(e){b.redrawPosition()},onParentScroll:function(e){b.picker&&b.picker.owner&&b.picker.owner.hide()},onPickerTouchStart:function(e){var t=e.target||e.srcElement;t._jscControlName&&b.onControlPointerStart(e,t,t._jscControlName,"touch")},triggerCallback:function(e,t){if(e[t]){var r=null;if("string"==typeof e[t])try{r=new Function(e[t])}catch(e){console.error(e)}else r=e[t];r&&r.call(e)}},triggerGlobal:function(e){for(var t=b.getInstances(),r=0;r<t.length;r+=1)t[r].trigger(e)},_pointerMoveEvent:{mouse:"mousemove",touch:"touchmove"},_pointerEndEvent:{mouse:"mouseup",touch:"touchend"},_pointerOrigin:null,_capturedTarget:null,onControlPointerStart:function(r,n,i,o){var e=n._jscInstance;b.preventDefault(r),b.captureTarget(n);function t(e,t){b.attachGroupEvent("drag",e,b._pointerMoveEvent[o],b.onDocumentPointerMove(r,n,i,o,t)),b.attachGroupEvent("drag",e,b._pointerEndEvent[o],b.onDocumentPointerEnd(r,n,i,o))}var s,a;t(document,[0,0]),window.parent&&window.frameElement&&(a=[-(s=window.frameElement.getBoundingClientRect()).left,-s.top],t(window.parent.window.document,a));var l=b.getAbsPointerPos(r),d=b.getRelPointerPos(r);switch(b._pointerOrigin={x:l.x-d.x,y:l.y-d.y},i){case"pad":"v"===b.getSliderChannel(e)&&0===e.channels.v&&e.fromHSVA(null,null,100,null),b.setPad(e,r,0,0);break;case"sld":b.setSld(e,r,0);break;case"asld":b.setASld(e,r,0)}e.trigger("input")},onDocumentPointerMove:function(e,r,n,t,i){return function(e){var t=r._jscInstance;switch(n){case"pad":b.setPad(t,e,i[0],i[1]);break;case"sld":b.setSld(t,e,i[1]);break;case"asld":b.setASld(t,e,i[1])}t.trigger("input")}},onDocumentPointerEnd:function(e,r,t,n){return function(e){var t=r._jscInstance;b.detachGroupEvents("drag"),b.releaseTarget(),t.trigger("input"),t.trigger("change")}},setPad:function(e,t,r,n){var i=b.getAbsPointerPos(t),o=r+i.x-b._pointerOrigin.x-e.padding-e.controlBorderWidth-e.borderWidth,s=n+i.y-b._pointerOrigin.y-e.padding-e.controlBorderWidth-e.borderWidth,a=o*(360/(e.width-1)),l=100-s*(100/(e.height-1));switch(b.getPadYChannel(e)){case"s":e.fromHSVA(a,l,null,null);break;case"v":e.fromHSVA(a,null,l,null)}},setSld:function(e,t,r){var n=100-(r+b.getAbsPointerPos(t).y-b._pointerOrigin.y-e.padding-e.controlBorderWidth-e.borderWidth)*(100/(e.height-1));switch(b.getSliderChannel(e)){case"s":e.fromHSVA(null,n,null,null);break;case"v":e.fromHSVA(null,null,n,null)}},setASld:function(e,t,r){var n=1-(r+b.getAbsPointerPos(t).y-b._pointerOrigin.y-e.padding-e.controlBorderWidth-e.borderWidth)*(1/(e.height-1));e.fromHSVA(null,null,null,n)},createPalette:function(){var e={elm:null,draw:null},o=document.createElement("canvas"),s=o.getContext("2d");return e.elm=o,e.draw=function(e,t,r){o.width=e,o.height=t,s.clearRect(0,0,o.width,o.height);var n=s.createLinearGradient(0,0,o.width,0);n.addColorStop(0,"#F00"),n.addColorStop(1/6,"#FF0"),n.addColorStop(2/6,"#0F0"),n.addColorStop(.5,"#0FF"),n.addColorStop(4/6,"#00F"),n.addColorStop(5/6,"#F0F"),n.addColorStop(1,"#F00"),s.fillStyle=n,s.fillRect(0,0,o.width,o.height);var i=s.createLinearGradient(0,0,0,o.height);switch(r.toLowerCase()){case"s":i.addColorStop(0,"rgba(255,255,255,0)"),i.addColorStop(1,"rgba(255,255,255,1)");break;case"v":i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)")}s.fillStyle=i,s.fillRect(0,0,o.width,o.height)},e},createSliderGradient:function(){var e={elm:null,draw:null},o=document.createElement("canvas"),s=o.getContext("2d");return e.elm=o,e.draw=function(e,t,r,n){o.width=e,o.height=t,s.clearRect(0,0,o.width,o.height);var i=s.createLinearGradient(0,0,0,o.height);i.addColorStop(0,r),i.addColorStop(1,n),s.fillStyle=i,s.fillRect(0,0,o.width,o.height)},e},createASliderGradient:function(){var e={elm:null,draw:null},l=document.createElement("canvas"),d=l.getContext("2d");return e.elm=l,e.draw=function(e,t,r){l.width=e,l.height=t,d.clearRect(0,0,l.width,l.height);var n=l.width/2,i=b.pub.chessboardColor1,o=b.pub.chessboardColor2;d.fillStyle=i,d.fillRect(0,0,l.width,l.height);for(var s=0;s<l.height;s+=2*n)d.fillStyle=o,d.fillRect(0,s,n,n),d.fillRect(n,s+n,n,n);var a=d.createLinearGradient(0,0,0,l.height);a.addColorStop(0,r),a.addColorStop(1,"rgba(0,0,0,0)"),d.fillStyle=a,d.fillRect(0,0,l.width,l.height)},e},BoxShadow:(r.prototype.toString=function(){var e=[Math.round(this.hShadow)+"px",Math.round(this.vShadow)+"px",Math.round(this.blur)+"px",Math.round(this.spread)+"px",this.color];return this.inset&&e.push("inset"),e.join(" ")},r),flags:{leaveValue:1,leaveAlpha:2,leavePreview:4},enumOpts:{format:["auto","any","hex","rgb","rgba"],previewPosition:["left","right"],mode:["hsv","hvs","hs","hv"],position:["left","right","top","bottom"],alphaChannel:["auto",!0,!1]},deprecatedOpts:{styleElement:"previewElement",onFineChange:"onInput",overwriteImportant:"forceStyle",closable:"closeButton",insetWidth:"controlBorderWidth",insetColor:"controlBorderColor"},pub:function(e,t){var h=this;if(t=t||{},this.channels={r:255,g:255,b:255,h:0,s:0,v:100,a:1},this.format="auto",this.value=void 0,this.alpha=void 0,this.onChange=void 0,this.onInput=void 0,this.valueElement=void 0,this.alphaElement=void 0,this.previewElement=void 0,this.previewPosition="left",this.previewSize=32,this.previewPadding=8,this.required=!0,this.refine=!0,this.hash=!1,this.uppercase=!0,this.forceStyle=!0,this.width=181,this.height=101,this.mode="HSV",this.alphaChannel="auto",this.position="bottom",this.smartPosition=!0,this.showOnClick=!0,this.sliderSize=16,this.crossSize=8,this.closeButton=!1,this.closeText="Close",this.buttonColor="#000000",this.buttonHeight=18,this.padding=12,this.backgroundColor="#FFFFFF",this.borderWidth=1,this.borderColor="#BBBBBB",this.borderRadius=8,this.controlBorderWidth=1,this.controlBorderColor="#BBBBBB",this.shadow=!0,this.shadowBlur=15,this.shadowColor="rgba(0,0,0,0.2)",this.pointerColor="#4C4C4C",this.pointerBorderWidth=1,this.pointerBorderColor="#FFFFFF",this.pointerThickness=2,this.zIndex=5e3,this.container=void 0,this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.minA=0,this.maxA=1,b.pub.options)for(var r in b.pub.options)if(b.pub.options.hasOwnProperty(r))try{d(r,b.pub.options[r])}catch(e){console.warn(e)}var n=[];t.preset&&("string"==typeof t.preset?n=t.preset.split(/\s+/):Array.isArray(t.preset)?n=t.preset.slice():console.warn("Unrecognized preset value")),n.push("default");for(var i=n.length-1;0<=i;--i){var o=n[i];if(o)if(b.pub.presets.hasOwnProperty(o)){for(var r in b.pub.presets[o])if(b.pub.presets[o].hasOwnProperty(r))try{d(r,b.pub.presets[o][r])}catch(e){console.warn(e)}}else console.warn("Unknown preset: %s",o)}var s,a,l=["preset"];for(var r in t)if(t.hasOwnProperty(r)&&-1===l.indexOf(r))try{d(r,t[r])}catch(e){console.warn(e)}function d(e,t){if("string"!=typeof e)throw new Error("Invalid value for option name: "+e);if(b.enumOpts.hasOwnProperty(e)&&("string"==typeof t&&(t=t.toLowerCase()),-1===b.enumOpts[e].indexOf(t)))throw new Error("Option '"+e+"' has invalid value: "+t);if(b.deprecatedOpts.hasOwnProperty(e)){var r=e,n=b.deprecatedOpts[e];if(!n)throw new Error("Option '"+e+"' is DEPRECATED");console.warn("Option '%s' is DEPRECATED, using '%s' instead",r,n),e=n}if(!(e in h))throw new Error("Unrecognized configuration option: "+e);return h[e]=t,1}function c(){h._processParentElementsInDOM(),b.picker||(b.picker={owner:null,wrap:document.createElement("div"),box:document.createElement("div"),boxS:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),padPal:b.createPalette(),cross:document.createElement("div"),crossBY:document.createElement("div"),crossBX:document.createElement("div"),crossLY:document.createElement("div"),crossLX:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),sldGrad:b.createSliderGradient(),sldPtrS:document.createElement("div"),sldPtrIB:document.createElement("div"),sldPtrMB:document.createElement("div"),sldPtrOB:document.createElement("div"),asld:document.createElement("div"),asldB:document.createElement("div"),asldM:document.createElement("div"),asldGrad:b.createASliderGradient(),asldPtrS:document.createElement("div"),asldPtrIB:document.createElement("div"),asldPtrMB:document.createElement("div"),asldPtrOB:document.createElement("div"),btn:document.createElement("div"),btnT:document.createElement("span")},b.picker.pad.appendChild(b.picker.padPal.elm),b.picker.padB.appendChild(b.picker.pad),b.picker.cross.appendChild(b.picker.crossBY),b.picker.cross.appendChild(b.picker.crossBX),b.picker.cross.appendChild(b.picker.crossLY),b.picker.cross.appendChild(b.picker.crossLX),b.picker.padB.appendChild(b.picker.cross),b.picker.box.appendChild(b.picker.padB),b.picker.box.appendChild(b.picker.padM),b.picker.sld.appendChild(b.picker.sldGrad.elm),b.picker.sldB.appendChild(b.picker.sld),b.picker.sldB.appendChild(b.picker.sldPtrOB),b.picker.sldPtrOB.appendChild(b.picker.sldPtrMB),b.picker.sldPtrMB.appendChild(b.picker.sldPtrIB),b.picker.sldPtrIB.appendChild(b.picker.sldPtrS),b.picker.box.appendChild(b.picker.sldB),b.picker.box.appendChild(b.picker.sldM),b.picker.asld.appendChild(b.picker.asldGrad.elm),b.picker.asldB.appendChild(b.picker.asld),b.picker.asldB.appendChild(b.picker.asldPtrOB),b.picker.asldPtrOB.appendChild(b.picker.asldPtrMB),b.picker.asldPtrMB.appendChild(b.picker.asldPtrIB),b.picker.asldPtrIB.appendChild(b.picker.asldPtrS),b.picker.box.appendChild(b.picker.asldB),b.picker.box.appendChild(b.picker.asldM),b.picker.btn.appendChild(b.picker.btnT),b.picker.box.appendChild(b.picker.btn),b.picker.boxB.appendChild(b.picker.box),b.picker.wrap.appendChild(b.picker.boxS),b.picker.wrap.appendChild(b.picker.boxB),b.picker.wrap.addEventListener("touchstart",b.onPickerTouchStart,!!b.isPassiveEventSupported&&{passive:!1}));var e,t,r=b.picker,n=!!b.getSliderChannel(h),i=h.isAlphaEnabled(),o=b.getPickerDims(h),s=2*h.pointerBorderWidth+h.pointerThickness+2*h.crossSize,a=b.getControlPadding(h),l=Math.min(h.borderRadius,Math.round(h.padding*Math.PI));r.wrap.className="jscolor-picker-wrap",r.wrap.style.clear="both",r.wrap.style.width=o[0]+2*h.borderWidth+"px",r.wrap.style.height=o[1]+2*h.borderWidth+"px",r.wrap.style.zIndex=h.zIndex,r.box.className="jscolor-picker",r.box.style.width=o[0]+"px",r.box.style.height=o[1]+"px",r.boxS.className="jscolor-picker-shadow",r.boxS.style.position="absolute",r.boxS.style.left="0",r.boxS.style.top="0",r.boxS.style.width="100%",r.boxS.style.height="100%",b.setBorderRadius(r.boxS,l+"px"),r.boxB.className="jscolor-picker-border",r.boxB.style.position="relative",r.boxB.style.border=h.borderWidth+"px solid",r.boxB.style.borderColor=h.borderColor,r.boxB.style.background=h.backgroundColor,b.setBorderRadius(r.boxB,l+"px"),r.padM.style.background="rgba(255,0,0,.2)",r.sldM.style.background="rgba(0,255,0,.2)",r.asldM.style.background="rgba(0,0,255,.2)",r.padM.style.opacity=r.sldM.style.opacity=r.asldM.style.opacity="0",r.pad.style.position="relative",r.pad.style.width=h.width+"px",r.pad.style.height=h.height+"px",r.padPal.draw(h.width,h.height,b.getPadYChannel(h)),r.padB.style.position="absolute",r.padB.style.left=h.padding+"px",r.padB.style.top=h.padding+"px",r.padB.style.border=h.controlBorderWidth+"px solid",r.padB.style.borderColor=h.controlBorderColor,r.padM._jscInstance=h,r.padM._jscControlName="pad",r.padM.style.position="absolute",r.padM.style.left=-h.borderWidth+"px",r.padM.style.top=-h.borderWidth+"px",r.padM.style.width=h.borderWidth+h.padding+2*h.controlBorderWidth+h.width+a+"px",r.padM.style.height=2*h.borderWidth+o[1]+"px",r.padM.style.cursor="crosshair",r.cross.style.position="absolute",r.cross.style.left=r.cross.style.top="0",r.cross.style.width=r.cross.style.height=s+"px",r.crossBY.style.position=r.crossBX.style.position="absolute",r.crossBY.style.background=r.crossBX.style.background=h.pointerBorderColor,r.crossBY.style.width=r.crossBX.style.height=2*h.pointerBorderWidth+h.pointerThickness+"px",r.crossBY.style.height=r.crossBX.style.width=s+"px",r.crossBY.style.left=r.crossBX.style.top=Math.floor(s/2)-Math.floor(h.pointerThickness/2)-h.pointerBorderWidth+"px",r.crossBY.style.top=r.crossBX.style.left="0",r.crossLY.style.position=r.crossLX.style.position="absolute",r.crossLY.style.background=r.crossLX.style.background=h.pointerColor,r.crossLY.style.height=r.crossLX.style.width=s-2*h.pointerBorderWidth+"px",r.crossLY.style.width=r.crossLX.style.height=h.pointerThickness+"px",r.crossLY.style.left=r.crossLX.style.top=Math.floor(s/2)-Math.floor(h.pointerThickness/2)+"px",r.crossLY.style.top=r.crossLX.style.left=h.pointerBorderWidth+"px",r.sld.style.overflow="hidden",r.sld.style.width=h.sliderSize+"px",r.sld.style.height=h.height+"px",r.sldGrad.draw(h.sliderSize,h.height,"#000","#000"),r.sldB.style.display=n?"block":"none",r.sldB.style.position="absolute",r.sldB.style.left=h.padding+h.width+2*h.controlBorderWidth+2*a+"px",r.sldB.style.top=h.padding+"px",r.sldB.style.border=h.controlBorderWidth+"px solid",r.sldB.style.borderColor=h.controlBorderColor,r.sldM._jscInstance=h,r.sldM._jscControlName="sld",r.sldM.style.display=n?"block":"none",r.sldM.style.position="absolute",r.sldM.style.left=h.padding+h.width+2*h.controlBorderWidth+a+"px",r.sldM.style.top=-h.borderWidth+"px",r.sldM.style.width=h.sliderSize+2*a+2*h.controlBorderWidth+(i?0:Math.max(0,h.padding-a))+"px",r.sldM.style.height=2*h.borderWidth+o[1]+"px",r.sldM.style.cursor="default",r.sldPtrIB.style.border=r.sldPtrOB.style.border=h.pointerBorderWidth+"px solid "+h.pointerBorderColor,r.sldPtrOB.style.position="absolute",r.sldPtrOB.style.left=-(2*h.pointerBorderWidth+h.pointerThickness)+"px",r.sldPtrOB.style.top="0",r.sldPtrMB.style.border=h.pointerThickness+"px solid "+h.pointerColor,r.sldPtrS.style.width=h.sliderSize+"px",r.sldPtrS.style.height=b.pub.sliderInnerSpace+"px",r.asld.style.overflow="hidden",r.asld.style.width=h.sliderSize+"px",r.asld.style.height=h.height+"px",r.asldGrad.draw(h.sliderSize,h.height,"#000"),r.asldB.style.display=i?"block":"none",r.asldB.style.position="absolute",r.asldB.style.left=h.padding+h.width+2*h.controlBorderWidth+a+(n?h.sliderSize+3*a+2*h.controlBorderWidth:0)+"px",r.asldB.style.top=h.padding+"px",r.asldB.style.border=h.controlBorderWidth+"px solid",r.asldB.style.borderColor=h.controlBorderColor,r.asldM._jscInstance=h,r.asldM._jscControlName="asld",r.asldM.style.display=i?"block":"none",r.asldM.style.position="absolute",r.asldM.style.left=h.padding+h.width+2*h.controlBorderWidth+a+(n?h.sliderSize+2*a+2*h.controlBorderWidth:0)+"px",r.asldM.style.top=-h.borderWidth+"px",r.asldM.style.width=h.sliderSize+2*a+2*h.controlBorderWidth+Math.max(0,h.padding-a)+"px",r.asldM.style.height=2*h.borderWidth+o[1]+"px",r.asldM.style.cursor="default",r.asldPtrIB.style.border=r.asldPtrOB.style.border=h.pointerBorderWidth+"px solid "+h.pointerBorderColor,r.asldPtrOB.style.position="absolute",r.asldPtrOB.style.left=-(2*h.pointerBorderWidth+h.pointerThickness)+"px",r.asldPtrOB.style.top="0",r.asldPtrMB.style.border=h.pointerThickness+"px solid "+h.pointerColor,r.asldPtrS.style.width=h.sliderSize+"px",r.asldPtrS.style.height=b.pub.sliderInnerSpace+"px",r.btn.className="jscolor-btn-close",r.btn.style.display=h.closeButton?"block":"none",r.btn.style.position="absolute",r.btn.style.left=h.padding+"px",r.btn.style.bottom=h.padding+"px",r.btn.style.padding="0 15px",r.btn.style.height=h.buttonHeight+"px",r.btn.style.border=h.controlBorderWidth+"px solid",e=h.controlBorderColor.split(/\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1],r.btn.style.borderColor=t,r.btn.style.color=h.buttonColor,r.btn.style.font="12px sans-serif",r.btn.style.textAlign="center",r.btn.style.cursor="pointer",r.btn.onmousedown=function(){h.hide()},r.btnT.style.lineHeight=h.buttonHeight+"px",r.btnT.innerHTML="",r.btnT.appendChild(document.createTextNode(h.closeText)),p(),u(),g(),b.picker.owner&&b.picker.owner!==h&&b.removeClass(b.picker.owner.targetElement,b.pub.activeClassName),(b.picker.owner=h).container===document.body?b.redrawPosition():b._drawPosition(h,0,0,"relative",!1),r.wrap.parentNode!==h.container&&h.container.appendChild(r.wrap),b.addClass(h.targetElement,b.pub.activeClassName)}function p(){var e=b.getPadYChannel(h),t=Math.round(h.channels.h/360*(h.width-1)),r=Math.round((1-h.channels[e]/100)*(h.height-1)),n=2*h.pointerBorderWidth+h.pointerThickness+2*h.crossSize,i=-Math.floor(n/2);switch(b.picker.cross.style.left=t+i+"px",b.picker.cross.style.top=r+i+"px",b.getSliderChannel(h)){case"s":var o=b.HSV_RGB(h.channels.h,100,h.channels.v),s=b.HSV_RGB(h.channels.h,0,h.channels.v),a="rgb("+Math.round(o[0])+","+Math.round(o[1])+","+Math.round(o[2])+")",l="rgb("+Math.round(s[0])+","+Math.round(s[1])+","+Math.round(s[2])+")";b.picker.sldGrad.draw(h.sliderSize,h.height,a,l);break;case"v":var d=b.HSV_RGB(h.channels.h,h.channels.s,100),a="rgb("+Math.round(d[0])+","+Math.round(d[1])+","+Math.round(d[2])+")",l="#000";b.picker.sldGrad.draw(h.sliderSize,h.height,a,l)}b.picker.asldGrad.draw(h.sliderSize,h.height,h.toHEXString())}function u(){var e,t=b.getSliderChannel(h);t&&(e=Math.round((1-h.channels[t]/100)*(h.height-1)),b.picker.sldPtrOB.style.top=e-(2*h.pointerBorderWidth+h.pointerThickness)-Math.floor(b.pub.sliderInnerSpace/2)+"px"),b.picker.asldGrad.draw(h.sliderSize,h.height,h.toHEXString())}function g(){var e=Math.round((1-h.channels.a)*(h.height-1));b.picker.asldPtrOB.style.top=e-(2*h.pointerBorderWidth+h.pointerThickness)-Math.floor(b.pub.sliderInnerSpace/2)+"px"}function m(){return b.picker&&b.picker.owner===h}if(this.option=function(){if(!arguments.length)throw new Error("No option specified");if(1===arguments.length&&"string"==typeof arguments[0]){try{return function(e){if(b.deprecatedOpts.hasOwnProperty(e)){var t=e,r=b.deprecatedOpts[e];if(!r)throw new Error("Option '"+e+"' is DEPRECATED");console.warn("Option '%s' is DEPRECATED, using '%s' instead",t,r),e=r}if(e in h)return h[e];throw new Error("Unrecognized configuration option: "+e)}(arguments[0])}catch(e){console.warn(e)}return!1}if(2<=arguments.length&&"string"==typeof arguments[0]){try{if(!d(arguments[0],arguments[1]))return!1}catch(e){return console.warn(e),!1}return this.redraw(),this.exposeColor(),!0}if(1!==arguments.length||"object"!=typeof arguments[0])throw new Error("Invalid arguments");var e=arguments[0],t=!0;for(var r in e)if(e.hasOwnProperty(r))try{d(r,e[r])||(t=!1)}catch(e){console.warn(e),t=!1}return this.redraw(),this.exposeColor(),t},this.channel=function(e,t){if("string"!=typeof e)throw new Error("Invalid value for channel name: "+e);if(void 0===t)return this.channels.hasOwnProperty(e.toLowerCase())?this.channels[e.toLowerCase()]:(console.warn("Getting unknown channel: "+e),!1);var r=!1;switch(e.toLowerCase()){case"r":r=this.fromRGBA(t,null,null,null);break;case"g":r=this.fromRGBA(null,t,null,null);break;case"b":r=this.fromRGBA(null,null,t,null);break;case"h":r=this.fromHSVA(t,null,null,null);break;case"s":r=this.fromHSVA(null,t,null,null);break;case"v":r=this.fromHSVA(null,null,t,null);break;case"a":r=this.fromHSVA(null,null,null,t);break;default:return console.warn("Setting unknown channel: "+e),!1}return!!r&&(this.redraw(),!0)},this.trigger=function(e){for(var t=b.strList(e),r=0;r<t.length;r+=1){var n=t[r].toLowerCase(),i=null;switch(n){case"input":i="onInput";break;case"change":i="onChange"}i&&b.triggerCallback(this,i),b.triggerInputEvent(this.valueElement,n,!0,!0)}},this.fromHSVA=function(e,t,r,n,i){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),null!==e){if(isNaN(e))return!1;this.channels.h=Math.max(0,Math.min(360,e))}if(null!==t){if(isNaN(t))return!1;this.channels.s=Math.max(0,Math.min(100,this.maxS,t),this.minS)}if(null!==r){if(isNaN(r))return!1;this.channels.v=Math.max(0,Math.min(100,this.maxV,r),this.minV)}if(null!==n){if(isNaN(n))return!1;this.channels.a=this.isAlphaEnabled()?Math.max(0,Math.min(1,this.maxA,n),this.minA):1}var o=b.HSV_RGB(this.channels.h,this.channels.s,this.channels.v);return this.channels.r=o[0],this.channels.g=o[1],this.channels.b=o[2],this.exposeColor(i),!0},this.fromRGBA=function(e,t,r,n,i){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),null!==e){if(isNaN(e))return!1;e=Math.max(0,Math.min(255,e))}if(null!==t){if(isNaN(t))return!1;t=Math.max(0,Math.min(255,t))}if(null!==r){if(isNaN(r))return!1;r=Math.max(0,Math.min(255,r))}if(null!==n){if(isNaN(n))return!1;this.channels.a=this.isAlphaEnabled()?Math.max(0,Math.min(1,this.maxA,n),this.minA):1}var o=b.RGB_HSV(null===e?this.channels.r:e,null===t?this.channels.g:t,null===r?this.channels.b:r);null!==o[0]&&(this.channels.h=Math.max(0,Math.min(360,o[0]))),0!==o[2]&&(this.channels.s=Math.max(0,this.minS,Math.min(100,this.maxS,o[1]))),this.channels.v=Math.max(0,this.minV,Math.min(100,this.maxV,o[2]));var s=b.HSV_RGB(this.channels.h,this.channels.s,this.channels.v);return this.channels.r=s[0],this.channels.g=s[1],this.channels.b=s[2],this.exposeColor(i),!0},this.fromHSV=function(e,t,r,n){return console.warn("fromHSV() method is DEPRECATED. Using fromHSVA() instead."),this.fromHSVA(e,t,r,null,n)},this.fromRGB=function(e,t,r,n){return console.warn("fromRGB() method is DEPRECATED. Using fromRGBA() instead."),this.fromRGBA(e,t,r,null,n)},this.fromString=function(e,t){var r=b.parseColorString(e);return!!r&&("any"===this.format.toLowerCase()&&(this._currentFormat=r.format),this.fromRGBA(r.rgba[0],r.rgba[1],r.rgba[2],r.rgba[3],t),!0)},this.toString=function(e){switch(void 0===e&&(e=this._currentFormat),e.toLowerCase()){case"hex":return this.toHEXString();case"rgb":return this.toRGBString();case"rgba":return this.toRGBAString()}return!1},this.toHEXString=function(){return"#"+(("0"+Math.round(this.channels.r).toString(16)).substr(-2)+("0"+Math.round(this.channels.g).toString(16)).substr(-2)+("0"+Math.round(this.channels.b).toString(16)).substr(-2)).toUpperCase()},this.toRGBString=function(){return"rgb("+Math.round(this.channels.r)+","+Math.round(this.channels.g)+","+Math.round(this.channels.b)+")"},this.toRGBAString=function(){return"rgba("+Math.round(this.channels.r)+","+Math.round(this.channels.g)+","+Math.round(this.channels.b)+","+Math.round(100*this.channels.a)/100+")"},this.toGrayscale=function(){return.213*this.channels.r+.715*this.channels.g+.072*this.channels.b},this.toCanvas=function(){return b.genColorPreviewCanvas(this.toRGBAString()).canvas},this.toDataURL=function(){return this.toCanvas().toDataURL()},this.toBackground=function(){var e=[];e.push(b.genColorPreviewGradient(this.toRGBAString()));var t=b.genColorPreviewCanvas();return e.push(["url('"+t.canvas.toDataURL()+"')","left top","repeat"].join(" ")),e.join(", ")},this.isLight=function(){return 127.5<this.toGrayscale()},this.hide=function(){m()&&(b.removeClass(h.targetElement,b.pub.activeClassName),b.picker.wrap.parentNode.removeChild(b.picker.wrap),delete b.picker.owner)},this.show=function(){c()},this.redraw=function(){m()&&c()},this.isAlphaEnabled=function(){return!0===this.alphaChannel||"auto"===this.alphaChannel&&("any"===this.format.toLowerCase()||"rgba"===this._currentFormat||this.alphaElement)},this.processValueInput=function(e){if(!this.required&&""===e.trim())return this.setPreviewElementBg(null),void this.exposeColor(b.flags.leaveValue|b.flags.leavePreview);this.refine?this.fromString(e)||this.exposeColor():this.fromString(e,b.flags.leaveValue)||(this.setPreviewElementBg(null),this.exposeColor(b.flags.leaveValue|b.flags.leavePreview))},this.processAlphaInput=function(e){this.fromHSVA(null,null,null,parseFloat(e))||this.exposeColor()},this.exposeColor=function(e){var t;e&b.flags.leaveValue||!this.valueElement||(t=this.toString(),"hex"===this._currentFormat&&(this.uppercase||(t=t.toLowerCase()),this.hash||(t=t.replace(/^#/,""))),"input"===b.nodeName(this.valueElement)?this.valueElement.value=t:this.valueElement.innerHTML=t),e&b.flags.leaveAlpha||!this.alphaElement||(t=Math.round(100*this.channels.a)/100,"input"===b.nodeName(this.alphaElement)?this.alphaElement.value=t:this.alphaElement.innerHTML=t),e&b.flags.leavePreview||!this.previewElement||((b.isTextInput(this.previewElement)||b.isButton(this.previewElement)&&!b.isButtonEmpty(this.previewElement))&&this.previewPosition,this.setPreviewElementBg(this.toRGBAString())),m()&&(p(),u(),g())},this.setPreviewElementBg=function(e){if(this.previewElement){var t=null,r=null;(b.isTextInput(this.previewElement)||b.isButton(this.previewElement)&&!b.isButtonEmpty(this.previewElement))&&(t=this.previewPosition,r=this.previewSize);var n,i=[];e?(i.push({image:b.genColorPreviewGradient(e,t,r?r-b.pub.previewSeparator.length:null),position:"left top",size:"auto",repeat:t?"repeat-y":"repeat",origin:"padding-box"}),n=b.genColorPreviewCanvas("rgba(0,0,0,0)",t?{left:"right",right:"left"}[t]:null,r,!0),i.push({image:"url('"+n.canvas.toDataURL()+"')",position:(t||"left")+" top",size:n.width+"px "+n.height+"px",repeat:t?"repeat-y":"repeat",origin:"padding-box"})):i.push({image:"none",position:"left top",size:"auto",repeat:"no-repeat",origin:"padding-box"});for(var o={image:[],position:[],size:[],repeat:[],origin:[]},s=0;s<i.length;s+=1)o.image.push(i[s].image),o.position.push(i[s].position),o.size.push(i[s].size),o.repeat.push(i[s].repeat),o.origin.push(i[s].origin);var a={"background-image":o.image.join(", "),"background-position":o.position.join(", "),"background-size":o.size.join(", "),"background-repeat":o.repeat.join(", "),"background-origin":o.origin.join(", ")};b.setStyle(this.previewElement,a,this.forceStyle);var l={left:null,right:null};t&&(l[t]=this.previewSize+this.previewPadding+"px");a={"padding-left":l.left,"padding-right":l.right};b.setStyle(this.previewElement,a,this.forceStyle,!0)}},this._processParentElementsInDOM=function(){if(!this._linkedElementsProcessed){this._linkedElementsProcessed=!0;var e=this.targetElement;do{var t=b.getCompStyle(e);t.position&&"fixed"===t.position.toLowerCase()&&(this.fixed=!0),e!==this.targetElement&&(e._jscEventsAttached||(e.addEventListener("scroll",b.onParentScroll,!1),e._jscEventsAttached=!0))}while((e=e.parentNode)&&"body"!==b.nodeName(e))}},void 0===this.container?this.container=document.body:this.container=b.fetchElement(this.container),!this.container)throw new Error("Cannot instantiate color picker without a container element");if(this.targetElement=b.fetchElement(e),!this.targetElement){if("string"==typeof e&&/^[a-zA-Z][\w:.-]*$/.test(e))throw new Error("If '"+e+"' is supposed to be an ID, please use '#"+e+"' or any valid CSS selector.");throw new Error("Cannot instantiate color picker without a target element")}if(this.targetElement.jscolor&&this.targetElement.jscolor instanceof b.pub)throw new Error("Color picker already installed on this element");this.targetElement.jscolor=this,b.addClass(this.targetElement,b.pub.className),b.instances.push(this),b.isButton(this.targetElement)&&("button"!==this.targetElement.type.toLowerCase()&&(this.targetElement.type="button"),b.isButtonEmpty(this.targetElement)&&(b.removeChildren(this.targetElement),this.targetElement.appendChild(document.createTextNode(" ")),s=b.getCompStyle(this.targetElement),(parseFloat(s["min-width"])||0)<this.previewSize&&b.setStyle(this.targetElement,{"min-width":this.previewSize+"px"},this.forceStyle))),void 0===this.valueElement?b.isTextInput(this.targetElement)&&(this.valueElement=this.targetElement):null===this.valueElement||(this.valueElement=b.fetchElement(this.valueElement)),this.alphaElement&&(this.alphaElement=b.fetchElement(this.alphaElement)),void 0===this.previewElement?this.previewElement=this.targetElement:null===this.previewElement||(this.previewElement=b.fetchElement(this.previewElement)),this.valueElement&&b.isTextInput(this.valueElement)&&(a={onInput:this.valueElement.oninput},this.valueElement.oninput=null,this.valueElement.addEventListener("blur",function(){h.valueElement&&h.processValueInput(h.valueElement.value)},!1),this.valueElement.addEventListener("keydown",function(e){"Enter"===b.eventKey(e)&&(h.valueElement&&h.processValueInput(h.valueElement.value),h.hide())},!1),this.valueElement.addEventListener("change",function(e){b.getData(e,"internal")||b.triggerCallback(h,"onChange")},!1),this.valueElement.addEventListener("input",function(e){b.getData(e,"internal")||(h.valueElement&&h.fromString(h.valueElement.value,b.flags.leaveValue),b.triggerCallback(h,"onInput"))},!1),a.onInput&&this.valueElement.addEventListener("input",a.onInput,!1),this.valueElement.setAttribute("autocomplete","off")),this.alphaElement&&b.isTextInput(this.alphaElement)&&(this.alphaElement.addEventListener("blur",function(){h.alphaElement&&h.processAlphaInput(h.alphaElement.value)},!1),this.alphaElement.addEventListener("keydown",function(e){"Enter"===b.eventKey(e)&&(h.alphaElement&&h.processAlphaInput(h.alphaElement.value),h.hide())},!1),this.alphaElement.addEventListener("change",function(e){b.getData(e,"internal")||(b.triggerCallback(h,"onChange"),b.triggerInputEvent(h.valueElement,"change",!0,!0))},!1),this.alphaElement.addEventListener("input",function(e){b.getData(e,"internal")||(h.alphaElement&&h.fromHSVA(null,null,null,parseFloat(h.alphaElement.value),b.flags.leaveAlpha),b.triggerCallback(h,"onInput"),b.triggerInputEvent(h.valueElement,"input",!0,!0))},!1),this.alphaElement.setAttribute("autocomplete","off"));var v="FFFFFF";void 0!==this.value&&(v=this.value),this.valueElement&&void 0!==this.valueElement.value&&(void 0!==this.value?this.valueElement.value=this.value:v=this.valueElement.value);var f,w=void 0;void 0!==this.alpha&&(w=""+this.alpha),this.alphaElement&&void 0!==this.alphaElement.value&&(void 0!==this.alpha?this.alphaElement.value=""+this.alpha:w=this.alphaElement.value),this._currentFormat=null,-1<["auto","any"].indexOf(this.format.toLowerCase())?(f=b.parseColorString(v),this._currentFormat=f?f.format:"hex"):this._currentFormat=this.format.toLowerCase(),this.processValueInput(v),void 0!==w&&this.processAlphaInput(w)}};function r(e,t,r,n,i,o){this.hShadow=e,this.vShadow=t,this.blur=r,this.spread=n,this.color=i,this.inset=!!o}return b.pub.className="jscolor",b.pub.activeClassName="jscolor-active",b.pub.looseJSON=!0,b.pub.presets={},b.pub.presets.default={},b.pub.presets.light={backgroundColor:"#FFFFFF",controlBorderColor:"#BBBBBB"},b.pub.presets.dark={backgroundColor:"#333333",controlBorderColor:"#999999"},b.pub.presets.small={width:101,height:101,padding:10},b.pub.presets.medium={width:181,height:101,padding:12},b.pub.presets.large={width:271,height:151,padding:12},b.pub.presets.thin={borderWidth:1,controlBorderWidth:1,pointerBorderWidth:1},b.pub.presets.thick={borderWidth:2,controlBorderWidth:2,pointerBorderWidth:2},b.pub.sliderInnerSpace=3,b.pub.chessboardSize=8,b.pub.chessboardColor1="#666666",b.pub.chessboardColor2="#999999",b.pub.previewSeparator=["rgba(255,255,255,.65)","rgba(128,128,128,.65)"],b.pub.install=function(){b.installBySelector("[data-jscolor]"),b.pub.lookupClass&&b.installBySelector("input."+b.pub.lookupClass+", button."+b.pub.lookupClass)},b.pub.trigger=function(e){b.initialized?b.triggerGlobal(e):b.triggerQueue.push(e)},b.pub.hide=function(){b.picker&&b.picker.owner&&b.picker.owner.hide()},b.pub.chessboard=function(e){return e=e||"rgba(0,0,0,0)",b.genColorPreviewCanvas(e).canvas.toDataURL()},b.pub.options={},b.pub.lookupClass="jscolor",b.pub.init=function(){return console.warn("jscolor.init() is DEPRECATED. Using jscolor.install() instead."),b.pub.install()},b.pub.installByClassName=function(){return console.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor="" attribute instead of a class name.'),!1},b.register(),b.pub}(),window.JSColor=window.jscolor);